<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DealBankers • Town Hall</title>
<link rel="icon" type="image/jpeg" href="icon (1).jpg" />
<style>
  :root{
    --bg:#0d1822; --panel:#0f1a24; --line:#1b2c3a;
    --text:#e9eef2; --muted:#9fb3c7; --accent:#0d6efd; --accent2:#0a58ca;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(135deg,#0b1218,#0e1a24 50%,#102434);
    color:var(--text); font-family:"Segoe UI",system-ui,-apple-system,Arial,sans-serif;
  }

  /* Top bar (no hamburger) */
  .bar{
    display:flex; align-items:center; gap:12px;
    padding:10px 12px; background:#0f1a24; border-bottom:1px solid var(--line);
    position:sticky; top:0; z-index:10;
  }
  .brand{display:flex; align-items:center; gap:10px}
  .brand img{width:34px;height:34px;border-radius:8px;object-fit:cover}
  .brand h1{font-size:14px; letter-spacing:.12em; margin:0; color:#cfe2f3; text-transform:uppercase}

  .spacer{flex:1}
  .btn{
    padding:8px 12px; border:1px solid var(--line); border-radius:10px;
    background:#0f1a24; color:var(--text); cursor:pointer; font-weight:600;
  }
  .btn:hover{filter:brightness(1.06)}
  .btn-primary{background:linear-gradient(180deg,var(--accent),var(--accent2)); border:none}

  /* Room chips */
  .rooms{
    display:flex; gap:8px; padding:10px 12px; flex-wrap:wrap; background:#0f1a24; border-bottom:1px solid var(--line);
  }
  .chip{
    padding:8px 12px; border:1px solid var(--line); border-radius:999px; cursor:pointer; color:#cfe2f3; background:#0f1a24;
    font-size:13px
  }
  .chip.active{background:linear-gradient(180deg,var(--accent),var(--accent2)); color:#fff; border:none}

  /* Utility row */
  .utils{display:flex; gap:8px; padding:10px 12px; align-items:center; background:#0f1a24; border-bottom:1px solid var(--line)}
  .utils input{
    background:#09131a; border:1px solid var(--line); color:var(--text); border-radius:10px; padding:8px 10px; min-width:200px;
  }

  /* Chat area */
  .wrap{height:calc(100vh - 156px);}
  .wrap.full{height:calc(100vh - 112px);}
  iframe{width:100%; height:100%; border:0; background:#fff}

  /* Light mode */
  .light body{background:#eef3f7;color:#0d1822}
  .light .bar,.light .rooms,.light .utils{background:#ffffff; border-color:#e5e9ef}
  .light .btn{background:#fff;color:#0d1822;border-color:#e5e9ef}
  .light .chip{background:#fff;color:#0d1822;border-color:#e5e9ef}
  .light .chip.active{color:#fff}
  .light .utils input{background:#fff;color:#0d1822;border-color:#e5e9ef}
</style>
</head>
<body>
  <!-- Top Bar -->
  <div class="bar">
    <div class="brand">
      <img src="icon (1).jpg" alt="DealBankers">
      <h1>DEALBANKERS • TOWN HALL</h1>
    </div>
    <div class="spacer"></div>
    <button class="btn" onclick="location.href='index.html'">Home</button>
    <button class="btn" onclick="location.href='profile.html'">Profile</button>
    <button id="openBtn" class="btn">Open in New Tab</button>
    <button id="fullBtn" class="btn">Fullscreen</button>
    <button id="themeBtn" class="btn">Theme</button>
  </div>

  <!-- Room Chips -->
  <nav class="rooms" id="roomChips">
    <!-- chips filled by JS -->
  </nav>

  <!-- Utilities -->
  <div class="utils">
    <input id="customRoom" placeholder="Join / create a room (e.g. san-antonio)" />
    <button class="btn btn-primary" id="joinBtn">Join Room</button>
    <div class="spacer"></div>
    <button id="refreshBtn" class="btn">Refresh</button>
    <button id="copyLinkBtn" class="btn">Copy Share Link</button>
  </div>

  <!-- Chat -->
  <div class="wrap" id="chatWrap">
    <iframe id="chatFrame" title="Town Hall Chat"></iframe>
  </div>

<script>
  // Rooms we offer as first-class chips
  const ROOMS = [
    { id:"dealbankers-townhall", label:"Town Hall" },
    { id:"contractors",          label:"Contractors" },
    { id:"wholesalers",          label:"Wholesalers" },
    { id:"realtors",             label:"Realtors" },
    { id:"investors",            label:"Investors" },
    { id:"support",              label:"Support" },
  ];

  const frame = document.getElementById('chatFrame');
  const chips = document.getElementById('roomChips');
  const wrap  = document.getElementById('chatWrap');

  // Build chips
  function drawChips(activeId){
    chips.innerHTML = "";
    ROOMS.forEach(r=>{
      const b = document.createElement('button');
      b.className = 'chip' + (r.id===activeId ? ' active':'' );
      b.textContent = r.label;
      b.onclick = ()=> setRoom(r.id, true);
      chips.appendChild(b);
    });
  }

  // Set iframe src and URL
  function setRoom(roomId, push){
    frame.src = `https://tlk.io/${roomId}`;
    drawChips(roomId);
    const url = new URL(location.href);
    url.searchParams.set('room', roomId);
    if (push) history.replaceState(null,'',url.toString());
    // Update "Open" handler
    document.getElementById('openBtn').onclick = ()=> window.open(`https://tlk.io/${roomId}`, '_blank');
  }

  // From URL or default
  const initial = new URL(location.href).searchParams.get('room') || ROOMS[0].id;
  setRoom(initial, false);

  // Join custom room
  document.getElementById('joinBtn').addEventListener('click', ()=>{
    const v = (document.getElementById('customRoom').value || '').trim().toLowerCase().replace(/\s+/g,'-');
    if(!v) return;
    setRoom(v, true);
  });

  // Utilities
  document.getElementById('refreshBtn').addEventListener('click', ()=> frame.contentWindow.location.reload());
  document.getElementById('fullBtn').addEventListener('click', ()=>{
    wrap.classList.toggle('full');
    document.getElementById('fullBtn').textContent = wrap.classList.contains('full') ? 'Exit Fullscreen' : 'Fullscreen';
  });
  document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(location.href);
      document.getElementById('copyLinkBtn').textContent = 'Link Copied!';
      setTimeout(()=> document.getElementById('copyLinkBtn').textContent='Copy Share Link', 1200);
    }catch(e){}
  });

  // Theme toggle (soft)
  const themeBtn = document.getElementById('themeBtn');
  let light = false;
  themeBtn.addEventListener('click', ()=>{
    light = !light;
    document.documentElement.classList.toggle('light', light);
    themeBtn.textContent = light ? 'Dark' : 'Theme';
  });

  // Keyboard: 1..6 switch rooms, R refresh, F full
  document.addEventListener('keydown', (e)=>{
    if(e.target.tagName === 'INPUT') return;
    if(e.key >= '1' && e.key <= '6'){
      const idx = Number(e.key)-1;
      if(ROOMS[idx]) setRoom(ROOMS[idx].id, true);
    }else if(e.key.toLowerCase() === 'r'){
      frame.contentWindow.location.reload();
    }else if(e.key.toLowerCase() === 'f'){
      document.getElementById('fullBtn').click();
    }
  });
</script>
</body>
</html>
```
