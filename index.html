<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>DealBankers ‚Äî Secure Sign-In</title>
  <link rel="icon" type="image/jpeg" href="icon (1).jpg"/>
  <meta name="robots" content="noindex"/>

  <style>
    :root{
      --bg1:#0b1218; --bg2:#0f1a24; --bg3:#0c1922;
      --text:#e7eef4; --muted:#9fb3c7; --line:rgba(255,255,255,.12);
      --accent:#c7a86a; --panel:#0f1a24ee; --shadow:0 24px 64px rgba(0,0,0,.45);
      --ok:#2aa84a; --bad:#de3e3e;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      background:
        radial-gradient(1200px 900px at 8% -10%, #162431 0%, var(--bg1) 40%),
        radial-gradient(800px 600px at 100% 110%, #0b1a23 0%, var(--bg3) 60%);
      font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;
      display:grid; place-items:center;
      padding:24px;
    }
    .wrap{
      width:100%; max-width:980px;
      display:grid; gap:18px;
      grid-template-columns: 1.2fr 1fr;
    }
    @media (max-width:900px){ .wrap{ grid-template-columns:1fr; } }

    .brand{
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line); border-radius:22px; padding:28px;
      box-shadow:var(--shadow); position:relative; overflow:hidden;
      display:flex; align-items:center; gap:18px;
    }
    .brand::before{
      content:""; position:absolute; inset:-40% 50% auto -40%;
      height:260px; background:radial-gradient(220px 220px at 20% 40%, rgba(199,168,106,.25), transparent 70%);
      filter:blur(10px); transform:rotate(-8deg);
    }
    .logo{
      width:92px; height:92px; border-radius:18px; flex:0 0 auto;
      background:#0d1520 url("icon (1).jpg") center/cover no-repeat;
      box-shadow:0 10px 40px rgba(199,168,106,.35);
      border:1px solid rgba(255,255,255,.12);
    }
    .brand h1{margin:0 0 6px; font-size:26px; letter-spacing:.2px}
    .brand p{margin:0; color:var(--muted)}

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line); border-radius:22px; padding:28px;
      box-shadow:var(--shadow);
    }
    .title{display:flex; align-items:center; gap:10px; margin-bottom:14px}
    .dot{width:10px; height:10px; border-radius:50%; background:var(--accent); box-shadow:0 0 24px var(--accent)}
    h2{margin:0; font-size:20px}

    /* Google-style button */
    .gbtn{
      width:100%; height:44px; display:inline-flex; align-items:center; justify-content:center;
      gap:12px; background:#fff; color:#1f1f1f; font-weight:600; border-radius:6px;
      border:1px solid #dadce0; cursor:pointer; transition:transform .04s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .gbtn:hover{transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.18)}
    .gicon{width:20px; height:20px}
    .row{display:flex; gap:12px; margin-top:12px}
    .row > button{flex:1; height:40px; background:#162330; color:var(--text); border:1px solid var(--line); border-radius:10px; cursor:pointer}
    .hint{margin-top:10px; font-size:12px; color:var(--muted)}
    .status{margin-top:12px; padding:10px 12px; border-radius:10px; background:rgba(255,255,255,.04); border:1px dashed var(--line); font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; max-height:150px; overflow:auto; white-space:pre-wrap}
    .ok{color:var(--ok)} .bad{color:var(--bad)}
    .debug-toggle{margin-top:10px; font-size:12px; color:#8ecaff; cursor:pointer; user-select:none}
    .hide{display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Left brand panel with your logo -->
    <section class="brand">
      <div class="logo" aria-label="DealBankers logo"></div>
      <div>
        <h1>DealBankers</h1>
        <p>Secure access to your acquisitions & dispositions portals. Sign in with Google to continue.</p>
      </div>
    </section>

    <!-- Right: login card -->
    <section class="card">
      <div class="title"><span class="dot"></span><h2>Secure Sign-In</h2></div>
      <button id="googleBtn" class="gbtn" type="button" aria-label="Sign in with Google">
        <!-- Official Google 'G' as inline SVG (brand-compliant) -->
        <svg class="gicon" viewBox="0 0 48 48" aria-hidden="true">
          <path fill="#FFC107" d="M43.6 20.5H42V20H24v8h11.2C33.7 32.9 29.2 36 24 36c-6.6 0-12-5.4-12-12s5.4-12 12-12c3.1 0 5.9 1.2 8 3.1l5.7-5.7C34.6 6.1 29.6 4 24 4 12.9 4 4 12.9 4 24s8.9 20 20 20c10 0 19-7.3 19-20 0-1.3-.1-2.7-.4-3.5z"/>
          <path fill="#FF3D00" d="M6.3 14.7l6.6 4.8C14.8 16 19 13 24 13c3.1 0 5.9 1.2 8 3.1l5.7-5.7C34.6 6.1 29.6 4 24 4 15.5 4 8.3 8.8 6.3 14.7z"/>
          <path fill="#4CAF50" d="M24 44c5.1 0 10-1.9 13.7-5.2l-6.3-5.2C29.4 35.7 26.9 37 24 37c-5.1 0-9.4-3.3-10.9-7.9l-6.6 5.1C8.5 39.1 15.7 44 24 44z"/>
          <path fill="#1976D2" d="M43.6 20.5H42V20H24v8h11.2C34.8 31.6 30.6 35 24 35c-5.1 0-9.4-3.3-10.9-7.9l-6.6 5.1C8.5 39.1 15.7 44 24 44c10 0 19-7.3 19-20 0-1.3-.1-2.7-.4-3.5z"/>
        </svg>
        <span>Sign in with Google</span>
      </button>

      <div class="row">
        <button id="redirectBtn" type="button" title="Use redirect flow (more reliable on strict browsers)">Use Redirect</button>
        <button id="signOutBtn" type="button">Sign out</button>
      </div>

      <div class="hint">Auth: <span id="authState">checking‚Ä¶</span></div>
      <div class="hint">Origin: <span id="originInfo"></span></div>

      <div id="debugToggle" class="debug-toggle">Show debug</div>
      <div id="status" class="status hide" aria-live="polite"></div>
    </section>
  </div>

  <!-- Firebase v10 (modular, CDN) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth, GoogleAuthProvider, signInWithPopup, signInWithRedirect, getRedirectResult,
      setPersistence, browserLocalPersistence, onAuthStateChanged, signOut
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // Your Firebase project
    const firebaseConfig = {
      apiKey: "AIzaSyAoidTIHZZwOJ_FrXXMZd_hPAuoxDJJncs",
      authDomain: "deal-bankers.firebaseapp.com",
      projectId: "deal-bankers"
    };

    const app  = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();
    provider.setCustomParameters({ prompt: "select_account" });

    const statusEl   = document.getElementById("status");
    const debugBtn   = document.getElementById("debugToggle");
    const authState  = document.getElementById("authState");
    const originInfo = document.getElementById("originInfo");

    originInfo.textContent = window.location.origin;

    function log(msg, cls=""){
      const line = document.createElement("div");
      if (cls) line.className = cls;
      line.textContent = msg;
      statusEl.appendChild(line);
      statusEl.scrollTop = statusEl.scrollHeight;
      console.log(msg);
    }

    // Toggle debug visibility (keeps UI clean by default)
    debugBtn.addEventListener("click", () => {
      statusEl.classList.toggle("hide");
      debugBtn.textContent = statusEl.classList.contains("hide") ? "Show debug" : "Hide debug";
    });

    await setPersistence(auth, browserLocalPersistence);

    // If we returned from redirect, surface the result
    try {
      const redir = await getRedirectResult(auth);
      if (redir?.user) {
        log("‚úÖ Redirect signed in: " + (redir.user.email || redir.user.uid), "ok");
      }
    } catch (e) {
      log("‚ùå Redirect error: " + e.code + " ‚Äî " + e.message, "bad");
    }

    onAuthStateChanged(auth, (user) => {
      authState.textContent = user ? (user.email || user.uid) : "signed out";
    });

    async function loginPopup(){
      try {
        const res = await signInWithPopup(auth, provider);
        log("‚úÖ Popup signed in: " + (res.user.email || res.user.uid), "ok");
      } catch (e) {
        log("‚ùå Popup sign-in failed: " + e.code + " ‚Äî " + e.message, "bad");
        const code = (e.code || "").toString();
        // Fallbacks where popup is unreliable
        if (
          code === "auth/popup-blocked" ||
          code === "auth/popup-closed-by-user" ||
          code.startsWith("auth/visibility") ||
          code === "auth/cors-unsupported" ||
          code === "auth/operation-not-supported-in-this-environment"
        ) {
          log("‚Ü™Ô∏è Using redirect flow instead‚Ä¶");
          return loginRedirect();
        }
      }
    }
    async function loginRedirect(){
      try { await signInWithRedirect(auth, provider); }
      catch (e) { log("‚ùå Redirect sign-in failed: " + e.code + " ‚Äî " + e.message, "bad"); }
    }
    async function doSignOut(){
      try { await signOut(auth); log("üëã Signed out","ok"); }
      catch (e){ log("‚ùå Sign-out error: " + e.code + " ‚Äî " + e.message,"bad"); }
    }

    document.getElementById("googleBtn").addEventListener("click", loginPopup);
    document.getElementById("redirectBtn").addEventListener("click", loginRedirect);
    document.getElementById("signOutBtn").addEventListener("click", doSignOut);
  </script>
</body>
</html>
