<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DealBankers — Real Estate Command Hub</title>
<link rel="icon" type="image/jpeg" href="icon (1).jpg"/>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="config.js"></script>
<script src="app-auth.js"></script>

<style>
:root{
 --bg1:#0a0f15; --bg2:#0f1b29; --accent:#2b74ff; --text:#eaf2ff;
 --panel:#121b26; --line:#1e2c3a; --muted:#9db2c7;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg1);color:var(--text);}
a{color:var(--accent);text-decoration:none}

header{
 position:sticky;top:0;z-index:10;
 display:flex;align-items:center;justify-content:space-between;
 padding:10px 18px;border-bottom:1px solid var(--line);
 background:linear-gradient(90deg,#0a0f15,#13233a 80%,#0a0f15);
 box-shadow:0 2px 10px rgba(0,0,0,.4);
}
.brand{display:flex;align-items:center;gap:10px;font-weight:800;font-size:1.1rem}
.brand img{width:40px;height:40px;border-radius:10px}
nav{display:flex;gap:10px;flex-wrap:wrap}
nav a{padding:6px 14px;border-radius:8px;background:#18283b;font-weight:700;color:#cfe3ff;transition:.2s}
nav a:hover{background:#25538c;color:#fff}
.status{font-size:.8rem;color:var(--muted)}

.hero{
 text-align:center;padding:70px 20px 50px;
 background:linear-gradient(180deg,#0b1218 0%,#0e1a25 70%);
}
.hero h1{font-size:2.4rem;margin:0 0 8px;font-weight:900;color:#fff;}
.hero p{color:#b5cbe0;font-size:1.1rem;margin:0 0 30px}
.gbtn{
 display:inline-flex;align-items:center;justify-content:center;gap:10px;
 padding:12px 20px;border-radius:12px;border:1px solid #747775;background:#1f1f1f;
 color:#e8eaed;font-weight:700;cursor:pointer;font-size:1rem;transition:.2s;
}
.gbtn:hover{background:#2c2c2c}
.gbtn img{width:20px;height:20px}

.section{max-width:1200px;margin:50px auto;padding:0 16px}
.section h2{text-align:center;margin-bottom:24px;font-size:1.6rem;color:#cfe3ff}
.tiles{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px}
.tile{
 background:linear-gradient(180deg,#111b27,#0c1219);
 border:1px solid #1d2b3a;border-radius:16px;padding:24px;text-align:center;
 transition:.3s;cursor:pointer;
}
.tile:hover{transform:translateY(-5px);box-shadow:0 4px 16px rgba(43,116,255,.3)}
.tile h3{margin:10px 0;color:#fff;font-size:1.2rem}
.tile p{font-size:.9rem;color:#9db2c7}

.townhall{
 background:rgba(10,20,30,.9);
 border-top:1px solid #1e2c3a;border-bottom:1px solid #1e2c3a;
 padding:20px 0;
}
.chat-container{
 max-width:900px;margin:0 auto;border-radius:14px;background:rgba(15,24,35,.7);
 border:1px solid #1e2c3a;padding:20px;display:flex;flex-direction:column;height:500px;
}
.chat-messages{flex:1;overflow-y:auto;padding-right:4px;}
.msg{margin-bottom:10px;padding:10px;border-radius:10px;background:rgba(255,255,255,.04);box-shadow:0 0 8px rgba(43,116,255,.2);}
.msg strong{color:#2b74ff}
.msg small{color:#9db2c7;font-size:.7rem;margin-left:4px}
.chat-input{display:flex;gap:10px;margin-top:10px}
.chat-input input{flex:1;padding:10px;border-radius:10px;border:1px solid #294861;background:#0e2332;color:#fff}
.chat-input button{padding:10px 14px;border-radius:10px;border:1px solid #2b74ff;background:#173764;color:#fff;font-weight:700;cursor:pointer;transition:.2s;}
.chat-input button:hover{background:#2b74ff;}

footer{margin:50px auto 30px;text-align:center;color:#88a5bf;font-size:.9rem;}
footer span{display:block;margin-top:4px;color:#2b74ff;font-weight:700}

@media(max-width:600px){
 header{flex-direction:column;align-items:flex-start;gap:6px}
 .chat-container{height:400px}
}
</style>
</head>
<body>
<header>
 <div class="brand"><img src="icon (1).jpg" alt=""><span>DealBankers</span></div>
 <nav>
  <a href="#">Home</a>
  <a href="#tools">Tools</a>
  <a href="#portals">Portals</a>
  <a href="claims-exchange.html">Claims Exchange</a>
 </nav>
 <div class="status" id="authStatus">Signed out</div>
</header>

<section class="hero">
 <h1>DealBankers</h1>
 <p>Your One-Stop Real Estate Portal</p>
 <button id="googleBtn" class="gbtn">
  <img src="https://developers.google.com/identity/images/g-logo.png" alt=""> Sign in with Google
 </button>
</section>

<section id="tools" class="section">
 <h2>Quick Service Links</h2>
 <div class="tiles">
  <div class="tile"><h3>Transactional Coordinating</h3><p>End-to-end document flow, title coordination, and compliance.</p></div>
  <div class="tile"><h3>Property Analysis</h3><p>Quick & deep-dive valuation tools powered by market data.</p></div>
  <div class="tile"><h3>Skip Tracing</h3><p>Basic and advanced owner & contact lookup services.</p></div>
 </div>
</section>

<section id="portals" class="section">
 <h2>User Portals</h2>
 <div class="tiles">
  <div class="tile"><h3>Wholesalers</h3><p>Upload leads, request marketing campaigns, or go live for partnerships.</p></div>
  <div class="tile"><h3>Contractors</h3><p>Post and claim jobs, request micro-loans, and manage tools.</p></div>
  <div class="tile"><h3>Realtors</h3><p>Access training, analysis tools, and collaborative leads.</p></div>
  <div class="tile"><h3>Investors</h3><p>Raise and deploy capital, manage notes, and post on the blog wall.</p></div>
 </div>
</section>

<section class="townhall" id="townhall">
 <h2 style="text-align:center;margin-bottom:16px;color:#cfe3ff">Townhall Chat</h2>
 <div class="chat-container">
  <div id="messages" class="chat-messages"></div>
  <div class="chat-input">
   <input id="msgInput" type="text" placeholder="Type your message...">
   <button id="sendBtn">Send</button>
  </div>
 </div>
</section>

<footer>
 © <span id="year"></span> DealBankers.com
 <span>Tread Lightly. Carry a Big Stick.</span>
</footer>

<script>
// ===== AUTH =====
const btn = document.getElementById('googleBtn');
const statusEl = document.getElementById('authStatus');
btn.addEventListener('click', async ()=>{
 try{
  const provider = new firebase.auth.GoogleAuthProvider();
  await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);
  await firebase.auth().signInWithPopup(provider);
 }catch(e){
  if(e.code==='auth/popup-blocked'){
   const provider = new firebase.auth.GoogleAuthProvider();
   await firebase.auth().signInWithRedirect(provider);
  }
 }
});
firebase.auth().onAuthStateChanged(u=>{
 if(u){
  btn.style.display='none';
  statusEl.innerHTML=`Signed in as ${u.displayName} <a id='logoutLink' style='margin-left:8px;color:#2b74ff;cursor:pointer;'>Sign out</a>`;
  document.getElementById('logoutLink').onclick=()=>firebase.auth().signOut();
 } else {
  btn.style.display='inline-flex';
  statusEl.textContent='Signed out';
 }
});

// ===== TOWNHALL CHAT =====
const db = firebase.database();
const msgRef = db.ref('townhall'); // ✅ fixed path
const msgBox = document.getElementById('messages');
const msgInput = document.getElementById('msgInput');
const sendBtn = document.getElementById('sendBtn');

function sendMsg(){
 const user = firebase.auth().currentUser;
 if(!user){alert('Please sign in to chat.');return;}
 const name = user.displayName || 'User';
 const text = msgInput.value.trim();
 if(!text) return;
 msgRef.push({name,text,ts:Date.now()});
 msgInput.value='';
}

sendBtn.addEventListener('click', sendMsg);
msgInput.addEventListener('keypress', e=>{if(e.key==='Enter'){e.preventDefault();sendMsg();}});

msgRef.limitToLast(100).on('child_added', snap=>{
 const d = snap.val();
 const t = new Date(d.ts).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
 const div = document.createElement('div');
 div.className='msg';
 div.innerHTML = `<strong>${d.name}</strong><small>${t}</small><div>${d.text}</div>`;
 msgBox.appendChild(div);
 msgBox.scrollTop = msgBox.scrollHeight;
});

document.getElementById('year').textContent=new Date().getFullYear();
</script>
</body>
</html>
