<!-- only showing the JS changes; your HTML/CSS stays the same -->

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getAuth,
    setPersistence,
    browserLocalPersistence,
    signInWithEmailAndPassword,
    GoogleAuthProvider,
    signInWithPopup
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  // Use the exact values from Firebase Project settings -> Web app
  const firebaseConfig = {
    apiKey: "AIzaSyAoidTIHZZwOJ_FrXXMZd_hPAuoxDJJncs",
    authDomain: "deal-bankers.firebaseapp.com",
    databaseURL: "https://deal-bankers-default-rtdb.firebaseio.com",
    projectId: "deal-bankers",
    storageBucket: "deal-bankers.firebasestorage.app", // keep what console shows
    messagingSenderId: "485110155601",
    appId: "1:485110155601:web:b4c38350ac58c1a2ecab70",
    measurementId: "G-KTNXZM14F7"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  // Keep users logged in between visits
  await setPersistence(auth, browserLocalPersistence).catch(console.error);

  // UI hooks
  const emailEl = document.getElementById('email');
  const passEl = document.getElementById('password');
  const emailBtn = document.getElementById('emailLogin');
  const googleBtn = document.getElementById('googleSignIn');
  const toastEl = document.getElementById('toast');

  function toast(msg){
    toastEl.textContent = msg;
    toastEl.style.display = 'block';
    setTimeout(()=> toastEl.style.display = 'none', 2400);
  }

  // Email / Password sign in
  emailBtn.addEventListener('click', async () => {
    const email = emailEl.value.trim();
    const password = passEl.value;
    if(!email || !password){ toast('Enter email & password'); return; }

    try{
      const cred = await signInWithEmailAndPassword(auth, email, password);
      toast(`Welcome, ${cred.user.email}`);
      window.location.href = "mitzi.html"; // temp redirect
    }catch(err){
      console.error(err);
      toast(err.message.replace('Firebase: ', ''));
    }
  });

  // Google sign in
  googleBtn.addEventListener('click', async () => {
    try{
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      toast(`Welcome, ${user.displayName || user.email}`);
      window.location.href = "mitzi.html"; // temp redirect
    }catch(err){
      console.error(err);
      toast(err.message.replace('Firebase: ', ''));
    }
  });
</script>
