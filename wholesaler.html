```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Wholesaler • Acquisition</title>

<style>
  :root{
    --bg:#0d1822; --panel:#101c26; --card:#132431; --line:#213446;
    --text:#eaf1f6; --muted:#9fb3c7; --accent:#0d6efd; --accent-2:#0a58ca;
    --ok:#28a745; --warn:#f0ad4e; --shadow:0 20px 50px rgba(0,0,0,.45);
    --r:14px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:"Segoe UI",system-ui,-apple-system,Arial,sans-serif;
    background:linear-gradient(135deg,#0b1218,#0e1a24 55%,#102434);
    color:var(--text);
  }

  /* Shell */
  .wrap{max-width:1080px; margin:0 auto; padding:16px}
  .toolbar{
    display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    background:var(--panel); border:1px solid var(--line); border-radius:var(--r);
    padding:10px 12px; box-shadow:var(--shadow);
  }
  .btn{
    display:inline-flex; align-items:center; gap:8px;
    padding:10px 14px; border-radius:10px; border:1px solid var(--line);
    background:#0f1a24; color:#eaf1f6; cursor:pointer; text-decoration:none; font-weight:600;
  }
  .btn:hover{filter:brightness(1.06)}
  .btn.primary{background:linear-gradient(180deg,var(--accent),var(--accent-2)); border:none}
  .btn.ghost{background:#0f1a24}
  .btn.ok{background:linear-gradient(180deg,#2eb85c,#219a49); border:none}
  .spacer{flex:1}

  /* Lead body */
  .card{
    margin-top:14px; background:var(--panel); border:1px solid var(--line); border-radius:var(--r);
    box-shadow:var(--shadow); overflow:hidden;
  }
  .head{
    display:flex; gap:10px; align-items:center; padding:12px 14px; border-bottom:1px solid var(--line);
    background:linear-gradient(180deg,#0f1a24,#0c151d);
  }
  .h-title{font-weight:800; letter-spacing:.02em}
  .controls{display:flex; gap:10px; flex-wrap:wrap; margin-left:auto}
  .chip{
    padding:6px 10px; border-radius:999px; border:1px solid var(--line); color:#cfe2f3;
    background:#0f1a24; font-size:12px;
  }

  .body{padding:14px}
  .row{display:flex; gap:14px; flex-wrap:wrap}
  .col{flex:1 1 360px}
  .lead-card{
    background:var(--card); border:1px solid var(--line); border-radius:12px; padding:14px;
  }
  .lead-name{font-weight:800; margin-bottom:4px}
  .lead-addr{color:#cfe2f3}

  .detail{
    margin-top:12px; border:1px dashed #2b4054; border-radius:10px; padding:10px; background:#0f1b25;
  }
  .detail summary{cursor:pointer; color:#cfe2f3; font-weight:700}
  .kv{font-size:14px; color:#cfe2f3}

  iframe.map{width:100%; height:320px; border:0; border-radius:12px; background:#fff}

  /* Segmented switch */
  .seg{
    display:inline-flex; border:1px solid var(--line); border-radius:999px; overflow:hidden; background:#0f1a24;
  }
  .seg button{
    padding:10px 16px; background:transparent; border:0; color:#cfe2f3; cursor:pointer; font-weight:600;
  }
  .seg button.active{background:#112433}

  /* Notes area */
  .notes{
    background:var(--card); border:1px solid var(--line); border-radius:12px; padding:12px;
  }
  textarea{width:100%; min-height:180px; border:1px solid var(--line); border-radius:10px; background:#0f1a24; color:#eaf1f6; padding:10px}

  /* Icon (tiny inline SVG) */
  .i{width:16px; height:16px; display:inline-block}

  /* Responsive tweaks */
  @media (min-width:980px){
    iframe.map{height:420px}
  }
</style>
</head>
<body>
  <div class="wrap">

    <!-- Top tools -->
    <div class="toolbar">
      <a id="linkDispo" class="btn ghost" href="dispo.html" target="_blank">
        <svg class="i" viewBox="0 0 24 24" fill="currentColor"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
        Open Dispo Page
      </a>

      <a id="linkProfile" class="btn ghost" href="profile.html">
        <svg class="i" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/></svg>
        Back to Profile
      </a>

      <a class="btn ghost" href="https://www.google.com/maps/d/u/0/viewer?mid=1C_OfzvCIlHnx-6nLaZ3Y88izZtflM5g" target="_blank">
        <svg class="i" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.1 2 5 5.1 5 9c0 5.2 7 13 7 13s7-7.8 7-13c0-3.9-3.1-7-7-7zm0 9.5c-1.4 0-2.5-1.1-2.5-2.5S10.6 6.5 12 6.5s2.5 1.1 2.5 2.5S13.4 11.5 12 11.5z"/></svg>
        Lead Map
      </a>

      <div class="spacer"></div>

      <button class="btn" id="btnFullscreen">
        <svg class="i" viewBox="0 0 24 24" fill="currentColor"><path d="M7 14H5v5h5v-2H7v-3zm0-4h2V7h3V5H7v5zm10 9h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
        Open Fullscreen
      </button>
      <button class="btn" id="btnReload">
        <svg class="i" viewBox="0 0 24 24" fill="currentColor"><path d="M12 6V3L8 7l4 4V8c2.8 0 5 2.2 5 5a5 5 0 11-5-5z"/></svg>
        Reload
      </button>
    </div>

    <!-- Lead card -->
    <div class="card">
      <div class="head">
        <div class="h-title">Wholesaler • Acquisition</div>
        <div class="controls">
          <span id="leadCount" class="chip">…</span>
          <button id="prevBtn" class="btn">Prev</button>
          <button id="randBtn" class="btn">Random</button>
          <button id="nextBtn" class="btn">Next</button>

          <a id="btnTextNow" class="btn primary" href="https://www.textnow.com/messaging" target="_blank">
            <svg class="i" viewBox="0 0 24 24" fill="currentColor"><path d="M4 4h16v12H5.17L4 17.17V4zM2 2v20l4-4h16c1.1 0 2-.9 2-2V2H2z"/></svg>
            TextNow
          </a>
          <button id="copyBtn" class="btn ok">
            <svg class="i" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16h13c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z"/></svg>
            Copy Phone
          </button>
        </div>
      </div>

      <div class="body">
        <div class="row">
          <!-- Lead info + map -->
          <div class="col">
            <div class="lead-card" id="leadInfo">
              <div class="lead-name" id="leadName">—</div>
              <div class="lead-addr" id="leadAddr">—</div>

              <details class="detail">
                <summary>Deal Details</summary>
                <div id="leadNotes" class="kv">No deal notes available.</div>
              </details>

              <div style="margin-top:12px; display:flex; align-items:center; gap:10px">
                <div class="seg" id="seg">
                  <button class="active" data-v="dir">Directions</button>
                  <button data-v="notes">Notes</button>
                </div>
                <a id="gmapsLink" class="btn ghost" href="#" target="_blank">Open in Google Maps</a>
              </div>

              <div id="dirView" style="margin-top:12px">
                <iframe id="mapFrame" class="map" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
              </div>
              <div id="notesView" class="notes" style="display:none; margin-top:12px">
                <textarea id="notesBox" placeholder="Your call notes… (saving soon)"></textarea>
              </div>
            </div>
          </div>

          <!-- Actions/shortcuts -->
          <div class="col">
            <div class="lead-card">
              <div style="font-weight:700; margin-bottom:8px">Shortcuts</div>
              <div style="display:grid; gap:10px">
                <a id="btnCall" class="btn ghost" href="#">Call</a>
                <a id="btnSMS" class="btn ghost" href="#">SMS</a>
                <a id="btnEmail" class="btn ghost" href="#">Email</a>
                <a class="btn ghost" target="_blank"
                   href="https://docs.google.com/forms/d/e/1FAIpQLScIZ7GX_ga5yOx34817gOL8Bb5m3KFXW8r-5I4taw_-ergOxw/viewform">
                   Update Lead Notes (Form)
                </a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Data feed -->
  <script src="leads.js"></script>
  <script>
    // helpers
    const $ = s => document.querySelector(s);
    const params = new URL(location.href).searchParams;
    const uid = params.get('uid') || '';

    // elements
    const leadName = $('#leadName');
    const leadAddr = $('#leadAddr');
    const leadNotes= $('#leadNotes');
    const leadCount= $('#leadCount');
    const mapFrame = $('#mapFrame');
    const gmapsLink= $('#gmapsLink');
    const btnCall  = $('#btnCall');
    const btnSMS   = $('#btnSMS');
    const btnEmail = $('#btnEmail');
    const btnCopy  = $('#copyBtn');
    const seg      = $('#seg');
    const dirView  = $('#dirView');
    const notesView= $('#notesView');

    // state
    let i = 0;
    const L = (window.leads || []);
    leadCount.textContent = L.length ? `Loaded ${L.length} lead(s).` : 'No leads loaded.';

    function cleanText(t){ return (t || '').replace(/\s+/g,' ').trim(); }
    function highlight(text){
      if (!text) return 'No deal notes available.';
      const keywords = ["asbestos","vacant","fha","foreclosure","build","loan","occupied","equity","taxes","motivated","carryback"];
      const re = new RegExp(`\\b(${keywords.join('|')})\\b`,'gi');
      return text.replace(re,'<strong style="color:#fff;background:#214; padding:0 3px; border-radius:4px">$1</strong>').replace(/\n/g,'<br>');
    }

    function googleMapsEmbed(address){
      const q = encodeURIComponent(address);
      return `https://www.google.com/maps?q=${q}&output=embed`;
    }

    function setLead(idx){
      if (!L.length) return;
      i = (idx + L.length) % L.length;
      const lead = L[i];
      const name = lead?.contacts?.[0]?.name || '—';
      const phone= lead?.contacts?.[0]?.phone || '';
      const email= lead?.contacts?.[0]?.email || '';
      const addr = cleanText(lead?.address || '');

      leadName.textContent = name;
      leadAddr.textContent = addr;
      leadNotes.innerHTML  = highlight(lead?.notes || '');

      // Map + link
      mapFrame.src = googleMapsEmbed(addr);
      gmapsLink.href = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(addr)}`;

      // Comms shortcuts
      btnCall.href  = phone ? `tel:${phone}` : '#';
      btnSMS.href   = phone ? `sms:${phone}` : '#';
      btnEmail.href = email ? `mailto:${email}` : '#';
      btnCopy.onclick = () => {
        if (!phone) return alert('No phone on file.');
        navigator.clipboard.writeText(phone).then(()=> alert('Copied: '+phone));
      };

      // Fullscreen + reload hooks
      const full = $('#btnFullscreen');
      full.onclick = ()=> window.open(`${location.pathname}?uid=${encodeURIComponent(uid)}&i=${i}`,'_blank');
      $('#btnReload').onclick = ()=> location.reload();

      // Prev/Next/Random
      $('#prevBtn').onclick = ()=> setLead(i-1);
      $('#nextBtn').onclick = ()=> setLead(i+1);
      $('#randBtn').onclick = ()=> setLead(Math.floor(Math.random()*L.length));

      // Dispo/profile links preserve uid
      $('#linkDispo').href = `dispo.html?uid=${encodeURIComponent(uid)}`;
      $('#linkProfile').href = `profile.html?tab=wholesaler&wh=acq`;
    }

    // segmented view
    seg.addEventListener('click', e=>{
      const b = e.target.closest('button'); if (!b) return;
      [...seg.children].forEach(x=>x.classList.toggle('active', x===b));
      const v = b.dataset.v;
      dirView.style.display   = (v==='dir')   ? '' : 'none';
      notesView.style.display = (v==='notes') ? '' : 'none';
    });

    // initial
    const start = parseInt(params.get('i')||'0',10);
    if (L.length) setLead(start);
  </script>
</body>
</html>
```
