<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DealBankers • Profile</title>
<link rel="icon" type="image/jpeg" href="icon (1).jpg"/>

<style>
  :root{
    --bg:#0d1822; --panel:#0f1a24; --card:#12202d; --line:#203241;
    --text:#eaf1f6; --muted:#9fb3c7; --accent:#0d6efd; --gold:#c7a86a;
    --ok:#28a745; --danger:#d9534f; --shadow:0 24px 64px rgba(0,0,0,.5);
    --r:16px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: "Segoe UI", system-ui, -apple-system, Arial, sans-serif;
    background: radial-gradient(900px 500px at 85% -10%, #133243 0%, transparent 60%),
               linear-gradient(135deg,#0b1218,#0e1a24 50%,#102434);
    color:var(--text);
    min-height:100vh; padding:18px;
  }

  .shell{
    max-width:1200px; margin:0 auto; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid #1a2a36; border-radius:20px; box-shadow:var(--shadow); backdrop-filter:blur(12px);
  }
  header{
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 18px; border-bottom:1px solid #1a2a36;
  }
  .brand{display:flex; gap:12px; align-items:center}
  .brand img{width:42px;height:42px;border-radius:10px;object-fit:cover;box-shadow:0 8px 20px rgba(0,0,0,.35)}
  .brand h1{font-size:16px; letter-spacing:.14em; text-transform:uppercase; margin:0; color:#bcd0e3}
  .userline{font-size:13px; color:var(--muted)}
  .row-actions{display:flex; gap:10px}
  .btn{
    padding:10px 14px; border-radius:10px; border:1px solid #264054; background:#10202c; color:var(--text);
    cursor:pointer; font-weight:600;
  }
  .btn:hover{filter:brightness(1.05)}
  .btn-ok{background:linear-gradient(180deg, #29a846, #1f8a39); border:none}
  .btn-danger{background:linear-gradient(180deg, #dd6060, #bb3e3e); border:none}

  /* Tabs */
  .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
  .tab{
    padding:10px 14px; border-radius:999px; border:1px solid #1d3142; cursor:pointer;
    font-size:14px; background:#0f1a24; color:#bcd0e3;
  }
  .tab.active{background:linear-gradient(180deg, var(--accent), #0a58ca); color:#fff; border:none}

  .content{
    padding:16px; display:grid; gap:16px;
  }
  .card{
    background:#10202c; border:1px solid #1a2a36; border-radius:var(--r); padding:16px;
  }
  h2{margin:0 0 8px}
  .muted{color:var(--muted); font-size:13px}

  /* Wholesaler toolbar */
  .toolbar{
    display:flex; gap:8px; margin:0 0 10px; flex-wrap:wrap
  }
  .toolbtn{
    padding:8px 12px; border-radius:10px; border:1px solid #1d3142; background:#0f1a24; color:#cfe2f3; cursor:pointer;
    font-size:14px
  }
  .toolbtn:hover{filter:brightness(1.06)}

  /* iframe area */
  .iframe-wrap{
    border:1px solid #1a2a36; border-radius:var(--r); overflow:hidden; background:#0b141b;
    height:78vh; min-height:560px;
  }
  .iframe-wrap.fullheight{height:88vh}
  .iframe-wrap iframe{width:100%; height:100%; border:0; background:#fff}

  /* Responsive tweaks */
  @media (max-width: 900px){
    .userline{display:none}
    .tabs{gap:6px}
    .iframe-wrap{height:86vh; min-height:640px}
  }
  @media (max-width: 600px){
    body{padding:10px}
    header{padding:12px}
    .tabs{padding:10px 10px 0}
    .content{padding:12px}
    .card{padding:12px}
    .toolbtn{flex:1 1 140px; text-align:center}
    .iframe-wrap{height:88vh; min-height:680px}
  }
</style>
</head>
<body>
  <div class="shell">
    <header>
      <div class="brand">
        <img src="icon (1).jpg" alt="DealBankers"/>
        <div>
          <h1>DEALBANKERS • PROFILE</h1>
          <div id="who" class="userline">Loading user…</div>
        </div>
      </div>
      <div class="row-actions">
        <button id="saveBtn" class="btn btn-ok">Save Profile</button>
        <button id="logoutBtn" class="btn btn-danger">Log Out</button>
      </div>
    </header>

    <nav class="tabs" id="tabs">
      <button class="tab active" data-tab="overview">Overview</button>
      <button class="tab" data-tab="wholesaler">Wholesaler</button>
      <button class="tab" data-tab="contractor">Contractor</button>
      <button class="tab" data-tab="realtor">Realtor</button>
      <button class="tab" data-tab="investor">Investor</button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>

    <section class="content">
      <!-- OVERVIEW -->
      <div class="card" data-panel="overview">
        <h2>Welcome</h2>
        <p class="muted">Pick a portal above to get to work. Your profile supports multiple roles; enable each as you grow.</p>
        <div class="card" style="margin-top:8px">
          <strong>Status:</strong> <span id="status">Authenticated</span><br/>
          <strong>Email:</strong> <span id="emailOut">—</span><br/>
          <strong>UID:</strong> <span id="uidOut">—</span>
        </div>
      </div>

      <!-- WHOLESALER PORTAL -->
      <div class="card" data-panel="wholesaler" style="display:none">
        <h2>Wholesaler • Acquisition</h2>
        <div class="muted" style="margin-bottom:10px">
          Foreclosure lists, rapid notes, and map view. Optimized for mobile—use the expand controls if you want even more space.
        </div>

        <div class="toolbar">
          <button class="toolbtn" id="btnExpand">Toggle Tall View</button>
          <button class="toolbtn" id="btnNewTab">Open Fullscreen in New Tab</button>
          <button class="toolbtn" id="btnReload">Reload Portal</button>
        </div>

        <div class="iframe-wrap" id="whWrap">
          <iframe src="wholesaler.html" id="whFrame" title="Wholesaler Acquisition"></iframe>
        </div>
      </div>

      <!-- CONTRACTOR -->
      <div class="card" data-panel="contractor" style="display:none">
        <h2>Contractor</h2>
        <p class="muted">Set your divisions (CSI MasterFormat) and service areas here. Coming soon.</p>
      </div>

      <!-- REALTOR -->
      <div class="card" data-panel="realtor" style="display:none">
        <h2>Realtor</h2>
        <p class="muted">MLS preferences, buyer/seller funnels, and referral routing. Coming soon.</p>
      </div>

      <!-- INVESTOR -->
      <div class="card" data-panel="investor" style="display:none">
        <h2>Investor</h2>
        <p class="muted">Buy box, return targets, preferred markets & dispositions. Coming soon.</p>
      </div>

      <!-- SETTINGS -->
      <div class="card" data-panel="settings" style="display:none">
        <h2>Settings</h2>
        <p class="muted">Profile visibility, notifications, and data export will live here.</p>
      </div>
    </section>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAoidTIHZZwOJ_FrXXMZd_hPAuoxDJJncs",
      authDomain: "deal-bankers.firebaseapp.com",
      databaseURL: "https://deal-bankers-default-rtdb.firebaseio.com",
      projectId: "deal-bankers",
      storageBucket: "deal-bankers.firebasestorage.app",
      messagingSenderId: "485110155601",
      appId: "1:485110155601:web:b4c38350ac58c1a2ecab70",
      measurementId: "G-KTNXZM14F7"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Tabs
    const panels = [...document.querySelectorAll('[data-panel]')];
    const tabs   = [...document.querySelectorAll('.tab')];
    function show(tabName){
      tabs.forEach(t => t.classList.toggle('active', t.dataset.tab === tabName));
      panels.forEach(p => p.style.display = (p.dataset.panel === tabName) ? '' : 'none');
      const url = new URL(location.href);
      url.searchParams.set('tab', tabName);
      history.replaceState(null, '', url.toString());
    }
    document.getElementById('tabs').addEventListener('click', (e)=>{
      const btn = e.target.closest('.tab'); if(!btn) return;
      show(btn.dataset.tab);
    });
    const initialTab = new URL(location.href).searchParams.get('tab') || 'overview';
    show(initialTab);

    // Auth
    auth.onAuthStateChanged(user=>{
      if(!user){ location.href = 'index.html'; return; }
      document.getElementById('who').textContent = `Signed in as ${user.displayName || user.email}`;
      document.getElementById('emailOut').textContent = user.email || '—';
      document.getElementById('uidOut').textContent   = user.uid;
    });

    document.getElementById('logoutBtn').addEventListener('click', async ()=>{
      try{ await auth.signOut(); location.href = 'index.html'; }catch(err){ alert(err.message); }
    });

    document.getElementById('saveBtn').addEventListener('click', ()=>{
      alert('Profile saved (placeholder).');
    });

    // Wholesaler controls
    const wrap = document.getElementById('whWrap');
    const frame = document.getElementById('whFrame');
    document.getElementById('btnExpand').addEventListener('click', ()=>{
      wrap.classList.toggle('fullheight');
    });
    document.getElementById('btnNewTab').addEventListener('click', ()=>{
      window.open('wholesaler.html','_blank');
    });
    document.getElementById('btnReload').addEventListener('click', ()=>{
      frame.contentWindow.location.reload();
    });
  </script>
</body>
</html>
