<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DealBankers • Profile</title>
  <link rel="icon" href="icon (1).jpg">
  <style>
    :root{--bg:#0a1218; --card:#0f1c24; --mut:#9fb4c6; --ink:#dff2ff; --edge:#1e3646; --pill:#132937; --ok:#21c776}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 600px at 50% -10%,#0f1b24 0%, #0a1218 45%, #071016 100%);
      color:var(--ink); font:400 16px/1.5 system-ui,Segoe UI,Inter,Roboto,Arial,sans-serif;
    }
    .wrap{max-width:980px;margin:24px auto;padding:0 16px}
    .tabs{display:flex;gap:.5rem;margin:16px 0 12px;flex-wrap:wrap}
    .tab{padding:.45rem .75rem;border-radius:10px;background:var(--pill);border:1px solid var(--edge);color:#cfe8ff;cursor:pointer;font-weight:600;text-decoration:none}
    .tab.active{background:#173345;border-color:#2b5062}
    .card{background:var(--card);border:1px solid var(--edge);border-radius:14px;padding:18px;box-shadow:0 10px 60px rgba(0,0,0,.28)}
    .row{display:flex;gap:10px;align-items:center}
    .row input{flex:1;background:#0c1720;border:1px solid #213a49;border-radius:10px;padding:.6rem .75rem;color:#cfe8ff}
    .send{background:var(--ok);border:0;border-radius:10px;padding:.55rem 1.1rem;font-weight:700;color:#04220f;cursor:pointer}
    .dim{color:var(--mut);font-size:.92rem}
    .hidden{display:none}
  </style>
  <script src="config.js"></script>
  <script type="module" src="app-auth.js"></script>
</head>
<body>
  <div class="wrap">
    <div class="tabs" id="tabs">
      <a class="tab" data-t="overview"   href="#overview">Overview</a>
      <a class="tab" data-t="wholesaler" href="wholesaler.html">Wholesaler</a>
      <a class="tab" data-t="contractor" href="contractor.html">Contractor</a>
      <a class="tab" data-t="realtor"    href="realtor.html">Realtor</a>
      <a class="tab" data-t="settings"   href="#settings">Settings</a>
    </div>

    <!-- Overview -->
    <section id="pane-overview" class="card">
      <div class="dim">Capital Open: <b>$300k</b> • Turn: <b>7–10 days</b></div>
      <h3>Townhall (All Users)</h3>
      <div class="row">
        <input id="chatBox" placeholder="Say something to the room… (press Enter to send)" />
        <button class="send" id="sendBtn">Send</button>
      </div>
      <div class="dim" style="margin-top:.6rem" id="chatNote">Connected.</div>
    </section>

    <!-- Settings -->
    <section id="pane-settings" class="card hidden">
      <h3>Settings</h3>
      <div class="dim">User role management & branding here.</div>
      <ul class="dim">
        <li>Your portals live here:
          <a href="wholesaler.html">Wholesaler</a> •
          <a href="contractor.html">Contractor</a> •
          <a href="realtor.html">Realtor</a>
        </li>
      </ul>
    </section>
  </div>

  <script type="module">
    // Ensure header & auth never blank the page
    const wait = (ms)=>new Promise(r=>setTimeout(r,ms));
    const ready = ()=> window.DB && window.DB.renderHeader;

    (async () => {
      for (let i=0;i<30 && !ready();i++) await wait(50);
      if (ready()) window.DB.renderHeader();

      // Tab handling (Overview + Settings are local; others navigate to real pages)
      const panes = {
        overview: document.getElementById('pane-overview'),
        settings: document.getElementById('pane-settings')
      };
      const tabs = Array.from(document.querySelectorAll('.tab'));
      const activate = (key)=>{
        tabs.forEach(t=>t.classList.toggle('active', t.dataset.t===key));
        Object.entries(panes).forEach(([k,el])=> el.classList.toggle('hidden', k!==key));
      };
      const start = new URL(location.href).hash?.replace('#','') || 'overview';
      activate(start);

      document.querySelector('[data-t="overview"]').onclick = (e)=>{ e.preventDefault(); location.hash='#overview'; activate('overview'); };
      document.querySelector('[data-t="settings"]').onclick = (e)=>{ e.preventDefault(); location.hash='#settings'; activate('settings'); };

      // Very light chat UX stub so the page isn’t dead while chat is being re-wired
      const i = document.getElementById('chatBox'), s = document.getElementById('sendBtn');
      const send = ()=>{ if(!i.value.trim()) return; const v=i.value.trim(); i.value=''; alert(`(demo) sent: ${v}`); };
      i.addEventListener('keydown', (e)=>{ if(e.key==='Enter') send(); });
      s.onclick = send;
    })();
  </script>
</body>
</html>
