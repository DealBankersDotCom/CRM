<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DealBankers • Profile</title>
<link rel="icon" href="images/db-badge.png"/>
<link rel="preconnect" href="https://www.gstatic.com" crossorigin>
<style>
  :root{--bg:#0f1a22;--panel:#13202a;--chip:#0d2a3a;--text:#cfe7ff;--mute:#88a8c4;--accent:#ffd166;--btn:#1f8b4c;}
  html,body{background:var(--bg);color:var(--text);margin:0;font:16px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial}
  .shell{max-width:1100px;margin:28px auto;padding:0 16px}
  .top{display:flex;gap:10px;align-items:center;justify-content:flex-end;margin-bottom:12px}
  .btn{background:#233748;color:#d8ebff;border:none;padding:8px 14px;border-radius:12px;cursor:pointer}
  .btn:hover{opacity:.9}
  .btn.gold{background:#6b4b12;color:#ffd166}
  .btn.red{background:#662424;color:#ffdede}
  .btn.blue{background:#1f3b63;color:#d7e9ff}
  .tabs{display:flex;gap:8px;margin:10px 0}
  .tab{background:#1b2b38;color:#cfe7ff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer}
  .tab.active{background:#254355}
  .card{background:var(--panel);border-radius:14px;padding:14px;margin-top:10px}
  .row{display:flex;gap:8px;align-items:center}
  .chip{background:var(--chip);display:inline-block;padding:7px 10px;border-radius:10px;margin:6px 6px 0 0;color:#cfe7ff}
  .input{width:100%;padding:10px;border-radius:9px;border:1px solid #2b4b63;background:#0e1b23;color:#d8ebff}
</style>
<script src="config.js"></script>
<script src="app-auth.js" type="module"></script>
</head>
<body>
<div class="shell">
  <div class="top">
    <button class="btn gold" onclick="goto('claims-exchange.html')">Claims Exchange</button>
    <button class="btn red" onclick="openImmediateSupport()">Sales</button>
    <button class="btn blue" onclick="openStandardSupport()">Support</button>
    <button class="btn" onclick="logout()">Log Out</button>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="showTab('overview')">Overview</button>
    <button class="tab" onclick="showTab('wholesaler')">Wholesaler</button>
    <button class="tab" onclick="showTab('contractor')">Contractor</button>
    <button class="tab" onclick="showTab('realtor')">Realtor</button>
    <button class="tab" onclick="showTab('settings')">Settings</button>
  </div>

  <section id="overview" class="card">
    <div class="row" style="justify-content:space-between">
      <div>Capital Open: <b>$300k</b> • Turn: <b>7–10 days</b></div>
    </div>
    <div class="card" style="margin-top:12px">
      <div style="margin-bottom:8px">Townhall (All Users)</div>
      <div id="chatList"></div>
      <div class="row" style="margin-top:8px">
        <input id="chatInput" class="input" placeholder="Say something to the room… (press Enter to send)"/>
        <button id="chatSend" class="btn">Send</button>
      </div>
    </div>
  </section>

  <section id="wholesaler" class="card" style="display:none">
    <div>Go to <a href="wholesaler.html">Wholesaler portal</a>.</div>
  </section>

  <section id="contractor" class="card" style="display:none">
    <div>Go to <a href="contractor.html">Contractor portal</a>.</div>
  </section>

  <section id="realtor" class="card" style="display:none">
    <div>Realtor tools are available here: <a href="realtor.html">Realtor portal</a>.</div>
  </section>

  <section id="settings" class="card" style="display:none">
    <div class="card-title">Settings</div>
    <div>User role management & branding live in this section (coming from earlier God Mode UI).</div>
  </section>
</div>

<script>
  // Tab logic
  const sections = ["overview","wholesaler","contractor","realtor","settings"];
  function showTab(id){
    sections.forEach(s=>{
      document.getElementById(s).style.display = (s===id) ? "" : "none";
      document.querySelectorAll(".tab").forEach(b=>{
        if (b.textContent.toLowerCase().includes(id)) b.classList.add("active");
        else b.classList.remove("active");
      });
    });
  }

  // Auth + chat
  const ready = setInterval(()=>{
    if (window.DB_READY){ clearInterval(ready); window.initTownhall(); }
  },50);
</script>
</body>
</html>
